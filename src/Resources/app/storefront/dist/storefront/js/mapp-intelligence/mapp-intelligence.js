(()=>{"use strict";var t={156:t=>{var e=function(t){var e;return!!t&&"object"==typeof t&&"[object RegExp]"!==(e=Object.prototype.toString.call(t))&&"[object Date]"!==e&&t.$$typeof!==i},i="function"==typeof Symbol&&Symbol.for?Symbol.for("react.element"):60103;function n(t,e){return!1!==e.clone&&e.isMergeableObject(t)?a(Array.isArray(t)?[]:{},t,e):t}function r(t,e,i){return t.concat(e).map(function(t){return n(t,i)})}function s(t){return Object.keys(t).concat(Object.getOwnPropertySymbols?Object.getOwnPropertySymbols(t).filter(function(e){return Object.propertyIsEnumerable.call(t,e)}):[])}function o(t,e){try{return e in t}catch(t){return!1}}function a(t,i,l){(l=l||{}).arrayMerge=l.arrayMerge||r,l.isMergeableObject=l.isMergeableObject||e,l.cloneUnlessOtherwiseSpecified=n;var c,d,u=Array.isArray(i);return u!==Array.isArray(t)?n(i,l):u?l.arrayMerge(t,i,l):(d={},(c=l).isMergeableObject(t)&&s(t).forEach(function(e){d[e]=n(t[e],c)}),s(i).forEach(function(e){(!o(t,e)||Object.hasOwnProperty.call(t,e)&&Object.propertyIsEnumerable.call(t,e))&&(o(t,e)&&c.isMergeableObject(i[e])?d[e]=(function(t,e){if(!e.customMerge)return a;var i=e.customMerge(t);return"function"==typeof i?i:a})(e,c)(t[e],i[e],c):d[e]=n(i[e],c))}),d)}a.all=function(t,e){if(!Array.isArray(t))throw Error("first argument should be an array");return t.reduce(function(t,i){return a(t,i,e)},{})},t.exports=a}},e={};function i(n){var r=e[n];if(void 0!==r)return r.exports;var s=e[n]={exports:{}};return t[n](s,s.exports,i),s.exports}i.n=t=>{var e=t&&t.__esModule?()=>t.default:()=>t;return i.d(e,{a:e}),e},i.d=(t,e)=>{for(var n in e)i.o(e,n)&&!i.o(t,n)&&Object.defineProperty(t,n,{enumerable:!0,get:e[n]})},i.o=(t,e)=>Object.prototype.hasOwnProperty.call(t,e);class n{static ucFirst(t){return t.charAt(0).toUpperCase()+t.slice(1)}static lcFirst(t){return t.charAt(0).toLowerCase()+t.slice(1)}static toDashCase(t){return t.replace(/([A-Z])/g,"-$1").replace(/^-/,"").toLowerCase()}static toLowerCamelCase(t,e){let i=n.toUpperCamelCase(t,e);return n.lcFirst(i)}static toUpperCamelCase(t,e){return e?t.split(e).map(t=>n.ucFirst(t.toLowerCase())).join(""):n.ucFirst(t.toLowerCase())}static parsePrimitive(t){try{return/^\d+(.|,)\d+$/.test(t)&&(t=t.replace(",",".")),JSON.parse(t)}catch(e){return t.toString()}}}class r{static isNode(t){return"object"==typeof t&&null!==t&&(t===document||t===window||t instanceof Node)}static hasAttribute(t,e){if(!r.isNode(t))throw Error("The element must be a valid HTML Node!");return"function"==typeof t.hasAttribute&&t.hasAttribute(e)}static getAttribute(t,e){let i=!(arguments.length>2)||void 0===arguments[2]||arguments[2];if(i&&!1===r.hasAttribute(t,e))throw Error(`The required property "${e}" does not exist!`);if("function"!=typeof t.getAttribute){if(i)throw Error("This node doesn't support the getAttribute function!");return}return t.getAttribute(e)}static getDataAttribute(t,e){let i=!(arguments.length>2)||void 0===arguments[2]||arguments[2],s=e.replace(/^data(|-)/,""),o=n.toLowerCamelCase(s,"-");if(!r.isNode(t)){if(i)throw Error("The passed node is not a valid HTML Node!");return}if(void 0===t.dataset){if(i)throw Error("This node doesn't support the dataset attribute!");return}let a=t.dataset[o];if(void 0===a){if(i)throw Error(`The required data attribute "${e}" does not exist on ${t}!`);return a}return n.parsePrimitive(a)}static querySelector(t,e){let i=!(arguments.length>2)||void 0===arguments[2]||arguments[2];if(i&&!r.isNode(t))throw Error("The parent node is not a valid HTML Node!");let n=t.querySelector(e)||!1;if(i&&!1===n)throw Error(`The required element "${e}" does not exist in parent node!`);return n}static querySelectorAll(t,e){let i=!(arguments.length>2)||void 0===arguments[2]||arguments[2];if(i&&!r.isNode(t))throw Error("The parent node is not a valid HTML Node!");let n=t.querySelectorAll(e);if(0===n.length&&(n=!1),i&&!1===n)throw Error(`At least one item of "${e}" must exist in parent node!`);return n}static getFocusableElements(){let t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:document.body,e=`
            input:not([tabindex^="-"]):not([disabled]):not([type="hidden"]),
            select:not([tabindex^="-"]):not([disabled]),
            textarea:not([tabindex^="-"]):not([disabled]),
            button:not([tabindex^="-"]):not([disabled]),
            a[href]:not([tabindex^="-"]):not([disabled]),
            [tabindex]:not([tabindex^="-"]):not([disabled])
        `;return t.querySelectorAll(e)}static getFirstFocusableElement(){let t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:document.body;return this.getFocusableElements(t)[0]}static getLastFocusableElement(){let t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:document,e=this.getFocusableElements(t);return e[e.length-1]}}var s=i(156),o=i.n(s);class a{constructor(t=document){this._el=t,t.$emitter=this,this._listeners=[]}publish(t){let e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},i=arguments.length>2&&void 0!==arguments[2]&&arguments[2],n=new CustomEvent(t,{detail:e,cancelable:i});return this.el.dispatchEvent(n),n}subscribe(t,e){let i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},n=this,r=t.split("."),s=i.scope?e.bind(i.scope):e;if(i.once&&!0===i.once){let e=s;s=function(i){n.unsubscribe(t),e(i)}}return this.el.addEventListener(r[0],s),this.listeners.push({splitEventName:r,opts:i,cb:s}),!0}unsubscribe(t){let e=t.split(".");return this.listeners=this.listeners.reduce((t,i)=>([...i.splitEventName].sort().toString()===e.sort().toString()?this.el.removeEventListener(i.splitEventName[0],i.cb):t.push(i),t),[]),!0}reset(){return this.listeners.forEach(t=>{this.el.removeEventListener(t.splitEventName[0],t.cb)}),this.listeners=[],!0}get el(){return this._el}set el(t){this._el=t}get listeners(){return this._listeners}set listeners(t){this._listeners=t}}class l{constructor(t,e={},i=!1){if(!(t instanceof Node)){console.warn(`There is no valid element given while trying to create a plugin instance for "${i}".`);return}this.el=t,this.$emitter=new a(this.el),this._pluginName=this._getPluginName(i),this.options=this._mergeOptions(e),this._initialized=!1,this._registerInstance(),this._init()}init(){console.warn(`The "init" method for the plugin "${this._pluginName}" is not defined. The plugin will not be initialized.`)}update(){}_init(){this._initialized||(this.init(),this._initialized=!0)}_update(){this._initialized&&this.update()}_mergeOptions(t){let e=[this.constructor.options,this.options,t];return e.push(this._getConfigFromDataAttribute()),e.push(this._getOptionsFromDataAttribute()),o().all(e.filter(t=>t instanceof Object&&!(t instanceof Array)).map(t=>t||{}))}_getConfigFromDataAttribute(){let t={};if("function"!=typeof this.el.getAttribute)return t;let e=n.toDashCase(this._pluginName),i=this.el.getAttribute(`data-${e}-config`);return i?window.PluginConfigManager.get(this._pluginName,i):t}_getOptionsFromDataAttribute(){let t={};if("function"!=typeof this.el.getAttribute)return t;let e=n.toDashCase(this._pluginName),i=this.el.getAttribute(`data-${e}-options`);if(i)try{return JSON.parse(i)}catch(t){console.error(`The data attribute "data-${e}-options" could not be parsed to json: ${t.message}`)}return t}_registerInstance(){window.PluginManager.getPluginInstancesFromElement(this.el).set(this._pluginName,this),window.PluginManager.getPlugin(this._pluginName,!1).get("instances").push(this)}_getPluginName(t){return t||(t=this.constructor.name),t}}class c{static isSupported(){return"undefined"!==document.cookie}static setItem(t,e,i){if(null==t)throw Error("You must specify a key to set a cookie");let n=new Date;n.setTime(n.getTime()+864e5*i);let r="";"https:"===location.protocol&&(r="secure"),document.cookie=`${t}=${e};expires=${n.toUTCString()};path=/;sameSite=lax;${r}`}static getItem(t){if(!t)return!1;let e=t+"=",i=document.cookie.split(";");for(let t=0;t<i.length;t++){let n=i[t];for(;" "===n.charAt(0);)n=n.substring(1);if(0===n.indexOf(e))return n.substring(e.length,n.length)}return!1}static removeItem(t){document.cookie=`${t}= ; expires = Thu, 01 Jan 1970 00:00:00 GMT;path=/`}static key(){return""}static clear(){}}let d="js-offcanvas-singleton";class u{constructor(){this.$emitter=new a}open(t,e,i,n,r,s,o){this._removeExistingOffCanvas();let a=this._createOffCanvas(i,s,o,n);this.setContent(t,r),this._openOffcanvas(a,e)}setContent(t,e){let i=this.getOffCanvas();i[0]&&(i[0].innerHTML=t,this._registerEvents(e),this._setAriaAttrs())}setAdditionalClassName(t){this.getOffCanvas()[0].classList.add(t)}getOffCanvas(){return document.querySelectorAll(`.${d}`)}close(t){let e=this.getOffCanvas();e.forEach(t=>{bootstrap.Offcanvas.getInstance(t).hide()}),setTimeout(()=>{this.$emitter.publish("onCloseOffcanvas",{offCanvasContent:e})},t)}goBackInHistory(){window.history.back()}exists(){return this.getOffCanvas().length>0}_openOffcanvas(t,e){window.focusHandler.saveFocusState("offcanvas"),u.bsOffcanvas.show(),window.history.pushState("offcanvas-open",""),"function"==typeof e&&e()}_registerEvents(t){let e=this.getOffCanvas();e.forEach(i=>{let n=()=>{setTimeout(()=>{i.remove(),window.focusHandler.resumeFocusState("offcanvas"),this.$emitter.publish("onCloseOffcanvas",{offCanvasContent:e})},t),i.removeEventListener("hide.bs.offcanvas",n)};i.addEventListener("hide.bs.offcanvas",n)}),window.addEventListener("popstate",this.close.bind(this,t),{once:!0}),document.querySelectorAll(".js-offcanvas-close").forEach(e=>e.addEventListener("click",this.close.bind(this,t)))}_setAriaAttrs(){let t=this.getOffCanvas()[0],e="off-canvas-headline",i=t.querySelector(`[data-id="${e}"]`);i&&!t.hasAttribute("aria-labelledby")&&(i.setAttribute("id",e),t.setAttribute("aria-labelledby",e))}_removeExistingOffCanvas(){return u.bsOffcanvas=null,this.getOffCanvas().forEach(t=>t.remove())}_getPositionClass(t){return"left"===t?"offcanvas-start":"right"===t?"offcanvas-end":`offcanvas-${t}`}_createOffCanvas(t,e,i,n){let r=document.createElement("div");if(r.classList.add("offcanvas",d),r.classList.add(this._getPositionClass(t)),r.setAttribute("tabindex","-1"),!0===e&&r.classList.add("is-fullwidth"),i){let t=typeof i;if("string"===t)r.classList.add(i);else if(Array.isArray(i))i.forEach(t=>{r.classList.add(t)});else throw Error(`The type "${t}" is not supported. Please pass an array or a string.`)}return document.body.appendChild(r),u.bsOffcanvas=new bootstrap.Offcanvas(r,{backdrop:!1!==n||"static"}),r}}let h=Object.freeze(new u);class p{static open(t){let e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null,i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"left",n=!(arguments.length>3)||void 0===arguments[3]||arguments[3],r=arguments.length>4&&void 0!==arguments[4]?arguments[4]:350,s=arguments.length>5&&void 0!==arguments[5]&&arguments[5],o=arguments.length>6&&void 0!==arguments[6]?arguments[6]:"";h.open(t,e,i,n,r,s,o)}static setContent(t){let e=!(arguments.length>1)||void 0===arguments[1]||arguments[1],i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:350;h.setContent(t,e,i)}static setAdditionalClassName(t){h.setAdditionalClassName(t)}static close(){let t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:350;h.close(t)}static exists(){return h.exists()}static getOffCanvas(){return h.getOffCanvas()}static REMOVE_OFF_CANVAS_DELAY(){return 350}}let f="loader",g={BEFORE:"before",INNER:"inner"};class v{constructor(t,e=g.BEFORE){this.parent=t instanceof Element?t:document.body.querySelector(t),this.position=e}create(){if(!this.exists()){if(this.position===g.INNER){this._previousHTML=this.parent.innerHTML,this.parent.innerHTML=v.getTemplate();return}this.parent.insertAdjacentHTML(this._getPosition(),v.getTemplate())}}remove(){if(this.position===g.INNER){this.parent.innerHTML=this._previousHTML;return}this.parent.querySelectorAll(`.${f}`).forEach(t=>t.remove())}exists(){return this.parent.querySelectorAll(`.${f}`).length>0}_getPosition(){return this.position===g.BEFORE?"afterbegin":"beforeend"}static getTemplate(){return`<div class="${f}" role="status">
                    <span class="visually-hidden">Loading...</span>
                </div>`}static SELECTOR_CLASS(){return f}}class m extends p{static open(){let t=arguments.length>0&&void 0!==arguments[0]&&arguments[0],e=arguments.length>1&&void 0!==arguments[1]&&arguments[1],i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null,n=arguments.length>3&&void 0!==arguments[3]?arguments[3]:"left",r=!(arguments.length>4)||void 0===arguments[4]||arguments[4],s=arguments.length>5&&void 0!==arguments[5]?arguments[5]:p.REMOVE_OFF_CANVAS_DELAY(),o=arguments.length>6&&void 0!==arguments[6]&&arguments[6],a=arguments.length>7&&void 0!==arguments[7]?arguments[7]:"";if(!t)throw Error("A url must be given!");h._removeExistingOffCanvas();let l=h._createOffCanvas(n,o,a,r);this.setContent(t,e,i,r,s),h._openOffcanvas(l)}static setContent(t,e,i,n,r){super.setContent(`<div class="offcanvas-body">${v.getTemplate()}</div>`,n,r);let s=t=>{super.setContent(t,n,r),"function"==typeof i&&i(t)};e?fetch(t,{method:"POST",body:e instanceof FormData?e:JSON.stringify(e),headers:{"X-Requested-With":"XMLHttpRequest"}}).then(t=>t.text()).then(t=>m.executeCallback(s,t)):fetch(t,{headers:{"X-Requested-With":"XMLHttpRequest"}}).then(t=>t.text()).then(t=>m.executeCallback(s,t))}static executeCallback(t,e){"function"==typeof t&&t(e),window.PluginManager.initializePlugins()}}class _{constructor(){this._request=null,this._errorHandlingInternal=!1}get(t,e){let i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"application/json",n=this._createPreparedRequest("GET",t,i);return this._sendRequest(n,null,e)}post(t,e,i){let n=arguments.length>3&&void 0!==arguments[3]?arguments[3]:"application/json";n=this._getContentType(e,n);let r=this._createPreparedRequest("POST",t,n);return this._sendRequest(r,e,i)}delete(t,e,i){let n=arguments.length>3&&void 0!==arguments[3]?arguments[3]:"application/json";n=this._getContentType(e,n);let r=this._createPreparedRequest("DELETE",t,n);return this._sendRequest(r,e,i)}patch(t,e,i){let n=arguments.length>3&&void 0!==arguments[3]?arguments[3]:"application/json";n=this._getContentType(e,n);let r=this._createPreparedRequest("PATCH",t,n);return this._sendRequest(r,e,i)}abort(){if(this._request)return this._request.abort()}setErrorHandlingInternal(t){this._errorHandlingInternal=t}_registerOnLoaded(t,e){e&&(!0===this._errorHandlingInternal?(t.addEventListener("load",()=>{e(t.responseText,t)}),t.addEventListener("abort",()=>{console.warn(`the request to ${t.responseURL} was aborted`)}),t.addEventListener("error",()=>{console.warn(`the request to ${t.responseURL} failed with status ${t.status}`)}),t.addEventListener("timeout",()=>{console.warn(`the request to ${t.responseURL} timed out`)})):t.addEventListener("loadend",()=>{e(t.responseText,t)}))}_sendRequest(t,e,i){return this._registerOnLoaded(t,i),t.send(e),t}_getContentType(t,e){return t instanceof FormData&&(e=!1),e}_createPreparedRequest(t,e,i){return this._request=new XMLHttpRequest,this._request.open(t,e),this._request.setRequestHeader("X-Requested-With","XMLHttpRequest"),i&&this._request.setRequestHeader("Content-type",i),this._request}}let w="element-loader-backdrop";class b extends v{static create(t){t.classList.add("has-element-loader"),b.exists(t)||(b.appendLoader(t),setTimeout(()=>{let e=t.querySelector(`.${w}`);e&&e.classList.add("element-loader-backdrop-open")},1))}static remove(t){t.classList.remove("has-element-loader");let e=t.querySelector(`.${w}`);e&&e.remove()}static exists(t){return t.querySelectorAll(`.${w}`).length>0}static getTemplate(){return`
        <div class="${w}">
            <div class="loader" role="status">
                <span class="visually-hidden">Loading...</span>
            </div>
        </div>
        `}static appendLoader(t){t.insertAdjacentHTML("beforeend",b.getTemplate())}}let C="CookieConfiguration_Update";class y extends l{static #t=this.options={offCanvasPosition:"left",submitEvent:"click",cookiePreference:"cookie-preference",cookieSelector:"[data-cookie]",buttonOpenSelector:".js-cookie-configuration-button button",buttonSubmitSelector:".js-offcanvas-cookie-submit",buttonAcceptAllSelector:".js-offcanvas-cookie-accept-all",globalButtonAcceptAllSelector:".js-cookie-accept-all-button",parentInputSelector:".offcanvas-cookie-parent-input",customLinkSelector:`[href="${window.router["frontend.cookie.offcanvas"]}"]`,entriesActiveClass:"offcanvas-cookie-entries--active",entriesClass:"offcanvas-cookie-entries",groupClass:"offcanvas-cookie-group",parentInputClass:"offcanvas-cookie-parent-input"};init(){this.lastState={active:[],inactive:[]},this._httpClient=new _,this._registerEvents()}_registerEvents(){let{submitEvent:t,buttonOpenSelector:e,customLinkSelector:i,globalButtonAcceptAllSelector:n}=this.options;Array.from(document.querySelectorAll(e)).forEach(e=>{e.addEventListener(t,this.openOffCanvas.bind(this))}),Array.from(document.querySelectorAll(i)).forEach(e=>{e.addEventListener(t,this._handleCustomLink.bind(this))}),Array.from(document.querySelectorAll(n)).forEach(e=>{e.addEventListener(t,this._acceptAllCookiesFromCookieBar.bind(this))})}_registerOffCanvasEvents(){let{submitEvent:t,buttonSubmitSelector:e,buttonAcceptAllSelector:i}=this.options,n=this._getOffCanvas();if(n){let r=n.querySelector(e),s=n.querySelector(i),o=Array.from(n.querySelectorAll('input[type="checkbox"]'));r&&r.addEventListener(t,this._handleSubmit.bind(this,c)),s&&s.addEventListener(t,this._acceptAllCookiesFromOffCanvas.bind(this,c)),o.forEach(e=>{e.addEventListener(t,this._handleCheckbox.bind(this))})}}_handleCustomLink(t){t.preventDefault(),this.openOffCanvas()}_handleUpdateListener(t,e){let i=this._getUpdatedCookies(t,e);document.$emitter.publish(C,i)}_getUpdatedCookies(t,e){let{lastState:i}=this,n={};return t.forEach(t=>{i.inactive.includes(t)&&(n[t]=!0)}),e.forEach(t=>{i.active.includes(t)&&(n[t]=!1)}),n}openOffCanvas(t){let{offCanvasPosition:e}=this.options,i=window.router["frontend.cookie.offcanvas"];this._hideCookieBar(),m.open(i,!1,this._onOffCanvasOpened.bind(this,t),e)}closeOffCanvas(t){m.close(),"function"==typeof t&&t()}_onOffCanvasOpened(t){this._registerOffCanvasEvents(),this._setInitialState(),this._setInitialOffcanvasState(),PluginManager.initializePlugins(),"function"==typeof t&&t()}_hideCookieBar(){let t=PluginManager.getPluginInstances("CookiePermission");t&&t[0]&&(t[0]._hideCookieBar(),t[0]._removeBodyPadding())}_setInitialState(){let t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null,e=t||this._getCookies("all"),i=[],n=[];e.forEach(t=>{let{cookie:e,required:r}=t;c.getItem(e)||r?i.push(e):n.push(e)}),this.lastState={active:i,inactive:n}}_setInitialOffcanvasState(){let t=this.lastState.active,e=this._getOffCanvas();t.forEach(t=>{let i=e.querySelector(`[data-cookie="${t}"]`);i.checked=!0,this._childCheckboxEvent(i)})}_handleCheckbox(t){let{parentInputClass:e}=this.options,{target:i}=t;(i.classList.contains(e)?this._parentCheckboxEvent:this._childCheckboxEvent).call(this,i)}_findParentEl(t,e){let i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null;for(;t&&!t.classList.contains(i);){if(t.classList.contains(e))return t;t=t.parentElement}return null}_isChecked(t){return!!t.checked}_parentCheckboxEvent(t){let{groupClass:e}=this.options,i=this._isChecked(t),n=this._findParentEl(t,e);this._toggleWholeGroup(i,n)}_childCheckboxEvent(t){let{groupClass:e}=this.options,i=this._isChecked(t),n=this._findParentEl(t,e);this._toggleParentCheckbox(i,n)}_toggleWholeGroup(t,e){Array.from(e.querySelectorAll("input")).forEach(e=>{e.checked=t})}_toggleParentCheckbox(t,e){let{parentInputSelector:i}=this.options,n=Array.from(e.querySelectorAll(`input:not(${i})`)),r=Array.from(e.querySelectorAll(`input:not(${i}):checked`));if(n.length>0){let t=e.querySelector(i);if(t){let e=r.length>0,i=e&&r.length!==n.length;t.checked=e,t.indeterminate=i}}}_handleSubmit(){let t=this._getCookies("active"),e=this._getCookies("inactive"),{cookiePreference:i}=this.options,n=[],r=[];e.forEach(t=>{let{cookie:e}=t;r.push(e),c.getItem(e)&&c.removeItem(e)}),t.forEach(t=>{let{cookie:e,value:i,expiration:r}=t;n.push(e),e&&i&&c.setItem(e,i,r)}),c.setItem(i,"1","30"),this._handleUpdateListener(n,r),this.closeOffCanvas(document.$emitter.publish("CookieConfiguration_CloseOffCanvas"))}acceptAllCookies(){let t=arguments.length>0&&void 0!==arguments[0]&&arguments[0];if(!t){this._handleAcceptAll(),this.closeOffCanvas();return}b.create(this.el),fetch(window.router["frontend.cookie.offcanvas"],{headers:{"X-Requested-With":"XMLHttpRequest"}}).then(t=>t.text()).then(t=>{let e=new DOMParser().parseFromString(t,"text/html");this._handleAcceptAll(e),b.remove(this.el),this._hideCookieBar()})}_acceptAllCookiesFromCookieBar(){return this.acceptAllCookies(!0)}_acceptAllCookiesFromOffCanvas(){return this.acceptAllCookies()}_handleAcceptAll(){let t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null,e=this._getCookies("all",t);this._setInitialState(e);let{cookiePreference:i}=this.options;e.forEach(t=>{let{cookie:e,value:i,expiration:n}=t;e&&i&&c.setItem(e,i,n)}),c.setItem(i,"1","30"),this._handleUpdateListener(e.map(t=>{let{cookie:e}=t;return e}),[])}_getCookies(){let t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"all",e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null,{cookieSelector:i}=this.options;return e||(e=this._getOffCanvas()),Array.from(e.querySelectorAll(i)).filter(e=>{switch(t){case"all":return!0;case"active":return this._isChecked(e);case"inactive":return!this._isChecked(e);default:return!1}}).map(t=>{let{cookie:e,cookieValue:i,cookieExpiration:n,cookieRequired:r}=t.dataset;return{cookie:e,value:i,expiration:n,required:r}})}_getOffCanvas(){let t=p?p.getOffCanvas():[];return!!t&&t.length>0&&t[0]}}class E extends window.PluginBaseClass{init(){this._subscribeEvents(),this._handleCheckoutCartAndConfirmPages(),this._handleWishlistPage(),this._addClickListenerToWishlistIcons(!0)}_addClickListenerToWishlistIcons(){let t=arguments.length>0&&void 0!==arguments[0]&&arguments[0];window._ti.userLoggedIn||this._getProductData(t).forEach(t=>{let e=`.product-wishlist-${t.productShopwareId}`;[...document.querySelectorAll(e)].forEach(e=>{e.addEventListener("click",()=>{this._fireProductEvent(t,"add-wl","wishlist")},{once:!0})})})}_handleWishlistPage(){"frontend.wishlist.page"===window._ti.shopwareRoute&&this._getProductData(!0).forEach(t=>{let e=`form[action="/wishlist/product/delete/${t.productShopwareId}"]`;document.querySelector(e).addEventListener("submit",()=>{this._fireProductEvent(t,"del-wl","wishlist")})})}_handleCheckoutCartAndConfirmPages(){if("frontend.checkout.cart.page"===window._ti.shopwareRoute||"frontend.checkout.confirm.page"===window._ti.shopwareRoute){let t=this._getProductData(!0),e=window.sessionStorage.getItem("swMappCartAdd");if(e){window.sessionStorage.removeItem("swMappCartAdd");let i=t.find(t=>t.productId===e);i&&setTimeout(()=>{this._fireProductEvent(i,"add","add-to-cart")},500)}window.PluginManager.getPluginInstances("FormAutoSubmit").forEach(e=>{e.$emitter.subscribe("beforeChange",i=>{let n=[...new FormData(i.target).entries()],r="/checkout/line-item/change-quantity/",s=e.el.getAttribute("action");if(s.includes(r)){let e=s.replace(r,""),i=this._getProductById(e,t),o=Number(n.find(t=>"quantity"===t[0])[1]),a=Number(i.productQuantity);o>a?this._fireProductEvent(i,"add","add-to-cart",o-a):a>o&&this._fireProductEvent(i,"del","delete-from-cart",a-o)}})}),t.forEach(t=>{let e=`form[action="/checkout/line-item/delete/${t.productShopwareId}"`;document.querySelector(e).addEventListener("submit",()=>{this._fireProductEvent(t,"del","delete-from-cart",t.productQuantity)})}),[...document.querySelectorAll("form[action='/checkout/product/add-by-number']")].forEach(t=>{t.addEventListener("submit",t=>{let e=new FormData(t.target);e=[...e.entries()].find(t=>"number"===t[0])[1],window.sessionStorage.setItem("swMappCartAdd",e)})})}}_subscribeEvents(){document.$emitter.subscribe(C,this._loadTiLoader),window.PluginManager.getPluginInstances("ListingPagination").forEach(t=>{t.$emitter.subscribe("change",t=>{this._paginationHandler(t)})}),window.PluginManager.getPluginInstances("SearchWidget").forEach(t=>{t.$emitter.subscribe("afterSuggest",t=>{this._searchWidgetHandler(t)})}),window.PluginManager.getPluginInstances("OffCanvasCart").forEach(t=>{t.$emitter.subscribe("registerEvents",()=>{this.cartItems=this._getProductData()}),t.$emitter.subscribe("offCanvasOpened",()=>{this._addClickListenerToWishlistIcons(),this.skipOnOpenCartRequest?this.skipOnOpenCartRequest=!1:this._changeCartHandler()})}),Object.keys(PluginManager.getPluginList()).includes("WishlistStorage")&&window.PluginManager.getPluginInstances("WishlistStorage").forEach(t=>{t.$emitter.subscribe("Wishlist/onProductAdded",t=>{this._wishlistHandler(t,"add-wl")}),t.$emitter.subscribe("Wishlist/onProductRemoved",t=>{this._wishlistHandler(t,"del-wl")})});let t=["FilterBoolean","FilterMultiSelect","FilterPropertySelect","FilterRange","FilterRating","FilterRatingSelect"],e=window.PluginManager.getPluginList();(t=t.filter(t=>e.hasOwnProperty(t))).forEach(t=>{window.PluginManager.getPluginInstances(t).forEach(t=>{t.$emitter.subscribe("change",()=>{this._updateAddToCart();let t=document.querySelector(".filter-reset-all");t&&setTimeout(()=>{t.addEventListener("click",()=>{this._updateAddToCart()})},500)})})}),this._subscribeAddToCart()}_fireProductEvent(t,e,i){let n=arguments.length>3&&void 0!==arguments[3]?arguments[3]:"1",r=JSON.stringify(window._ti);t.productQuantity=n,t.productCost=(n*t.productCost).toFixed(2),t.productCategories&&(t.productCategories[0]&&(t.productCategory=t.productCategories[0]),t.productCategories[1]&&(t.productSubCategory=t.productCategories[1])),t.shoppingCartStatus=e,window._ti={...window._ti,...t},window.wts.push(["linkId",window._ti[e]||i]),window.wts.push(["send","pageupdate",!0]),this._restoreDatalayer(r)}_restoreDatalayer(t){setTimeout(()=>{window.wts.push(["linkId","false"]),Object.keys(window._ti).forEach(t=>{window._ti[t]="false"}),window._ti={...window._ti,...JSON.parse(t)}},500)}_getProductData(){let t=arguments.length>0&&void 0!==arguments[0]&&arguments[0],e=[...document.querySelectorAll(".mapp-tracking-data-cart")];return t&&(e=[...document.querySelectorAll(".mapp-tracking-data"),...e]),e.map(t=>{let e=[];try{e=JSON.parse(t.dataset.productCategories)}catch(t){}return{...t.dataset,productCategories:e}})}_getProductById(t){let e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:this._getProductData(!0),i=e.findIndex(e=>t===e.productShopwareId);return -1!==i&&e[i]}_changeCartHandler(){let t=this._getProductData();this.cartItems.forEach((e,i)=>{let n=t.findIndex(t=>t.productShopwareId===e.productShopwareId);if(-1===n)this._fireProductEvent(e,"del","remove-from-cart",e.productQuantity);else{let e=Number(this.cartItems[i].productQuantity),r=Number(t[n].productQuantity);r>e?this._fireProductEvent(t[n],"add","add-to-cart",r-e):e>r&&this._fireProductEvent(t[n],"del","delete-from-cart",e-r)}}),this.cartItems=t}_wishlistHandler(t,e){let i=this._getProductById(t.detail.productId);this._fireProductEvent(i,e,"wishlist")}_loadTiLoader(t){t.detail.sw_MappIntelligence&&function(t,e,i,n){if(t.wts=t.wts||[],-1===e.cookie.indexOf("wt_r=1")){var r=e.getElementsByTagName(i)[0];(i=e.createElement(i)).async=!0,i.onload=function(){if(void 0!==t.wt_r&&!isNaN(t.wt_r)){var i=new Date,n=i.getTime()+1e3*parseInt(t.wt_r);i.setTime(n),e.cookie="wt_r=1;path=/;expires="+i.toUTCString()}},i.onerror=function(){void 0!==t.wt_mcp_hide&&"function"==typeof t.wt_mcp_hide.show&&(t.wt_mcp_hide.show(),t.wt_mcp_hide.show=function(){})},i.src="//"+function(t){var i="";if(t.customDomain&&t.customPath?i=t.customDomain+"/"+t.customPath:t.tiDomain&&t.tiId&&(i=t.tiDomain+"/resp/api/get/"+t.tiId+"?url="+encodeURIComponent("https://"+e.location.host+"/")+"&v=5"),t.option)for(var n in t.option)i+="&"+n+"="+encodeURIComponent(t.option[n]);return i}(n),r.parentNode.insertBefore(i,r)}}(window,document,"script",_tiConfig)}_subscribeAddToCart(){window.PluginManager.getPluginInstances("AddToCart").forEach(t=>{t.$emitter.subscribe("beforeFormSubmit",t=>{this._addToCartHandler(t)})})}_updateAddToCart(){var t=window.PluginManager.getPluginInstances("AddToCart").length,e=setInterval(()=>{window.PluginManager.getPluginInstances("AddToCart").length!==t&&(this._subscribeAddToCart(),clearInterval(e))},500)}_paginationHandler(t){let e=t.target.getAttribute("value"),i=null;if(t.target.options){let e=t.target.options.selectedIndex;i=t.target.options[e].innerText}this._updateAddToCart(),e?window.wts&&window._ti.pageNumber&&(window._ti.pageNumber=e,window.wts.push(["send","pageupdate"])):i&&window.wts&&window.wts.push(["send","click",{linkId:"Sorting: "+i}])}_searchWidgetHandler(){window.wts&&window.wts.push(["linkTrackInstall"])}_addToCartHandler(t){this.skipOnOpenCartRequest=!0;var e=JSON.stringify(window._ti),i={...r.querySelector(t.target,".mapp-tracking-data",!0).dataset};if(i.productQuantity&&i.productShopwareId&&(i.productQuantity=t.target.elements["lineItems["+i.productShopwareId+"][quantity]"].value),i.productCost&&i.productQuantity&&(i.productCost=(i.productQuantity*i.productCost).toFixed(2)),i.productCategories&&(i.productCategories=JSON.parse(i.productCategories),i.productCategories[0]&&(i.productCategory=i.productCategories[0]),i.productCategories[1]&&(i.productSubCategory=i.productCategories[1])),window._ti={...window._ti,...i},window.wts){if(window._ti.hasOwnProperty("contentSubcategory")&&"Product Detail"!==window._ti.contentSubcategory){let t=JSON.stringify(window._ti);window._ti.shoppingCartStatus="view",window._ti.productQuantity="1",window.wts.push(["send","pageupdate"]),window._ti=JSON.parse(t)}setTimeout(()=>{window.wts.push(["send","pageupdate"]),this._restoreDatalayer(e)},500)}}constructor(...t){super(...t),this.cartItems=[],this.skipOnOpenCartRequest=!1}}window.PluginManager.register("MappIntelligenceClientEvents",E)})();